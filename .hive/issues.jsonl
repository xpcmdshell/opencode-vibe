{"id":"cell--xts0a-mjnpy82bz63","title":"Scaffold opencode-next turborepo with Next.js 16","description":"Greenfield turborepo: bun workspaces, Next.js 16 canary + turbopack, typescript-go, oxlint, biome, ai-elements. Simplified structure with future-extraction-ready src folders.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T03:06:23.699Z","updated_at":"2025-12-27T03:33:41.342Z","closed_at":"2025-12-27T03:33:41.342Z","dependencies":[],"labels":[],"comments":[]}
{"id":"cell--xts0a-mjnpy82ip5k","title":"Scaffold turborepo root with bun + tooling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T03:06:23.706Z","updated_at":"2025-12-27T03:11:58.610Z","closed_at":"2025-12-27T03:11:58.610Z","parent_id":"cell--xts0a-mjnpy82bz63","dependencies":[],"labels":[],"comments":[]}
{"id":"cell--xts0a-mjnpy82k4sa","title":"Create Next.js 16 app in apps/web","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T03:06:23.708Z","updated_at":"2025-12-27T03:15:53.511Z","closed_at":"2025-12-27T03:15:53.511Z","parent_id":"cell--xts0a-mjnpy82bz63","dependencies":[],"labels":[],"comments":[]}
{"id":"cell--xts0a-mjnpy82mmra","title":"Initialize ai-elements in apps/web","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T03:06:23.710Z","updated_at":"2025-12-27T03:33:38.254Z","closed_at":"2025-12-27T03:33:38.254Z","parent_id":"cell--xts0a-mjnpy82bz63","dependencies":[],"labels":[],"comments":[]}
{"id":"cell--xts0a-mjnpy82osxv","title":"Update ADR to reflect simplified structure","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T03:06:23.712Z","updated_at":"2025-12-27T03:11:56.353Z","closed_at":"2025-12-27T03:11:56.353Z","parent_id":"cell--xts0a-mjnpy82bz63","dependencies":[],"labels":[],"comments":[]}
{"id":"cell--xts0a-mjnpy82q88g","title":"Write AGENTS.md for the project","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T03:06:23.714Z","updated_at":"2025-12-27T03:11:57.211Z","closed_at":"2025-12-27T03:11:57.211Z","parent_id":"cell--xts0a-mjnpy82bz63","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnqskkevn2","title":"Replace eslint with oxlint + biome in apps/web","description":"create-next-app installed eslint by default. We want the new stack:\n- Remove eslint, eslint-config-next\n- Remove eslint.config.mjs\n- Add oxlint for linting\n- Use biome from root for formatting\n- Update package.json scripts to use oxlint/biome","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T03:29:59.582Z","updated_at":"2025-12-27T03:33:39.760Z","closed_at":"2025-12-27T03:33:39.760Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrabt06q2","title":"Wire up OpenCode SDK connection in apps/web","description":"## Context\n\nSetting up SDK connection to OpenCode server. Current state:\n\n### Files Created\n- `apps/web/src/core/client.ts` - SDK client factory wrapper\n- `apps/web/src/core/poc.ts` - POC script to test connection\n\n### SDK Installed\n- `@opencode-ai/sdk@1.0.203` in apps/web\n\n### SDK API (from ADR)\n```typescript\nconst client = createOpencodeClient({ baseUrl, directory })\n\n// Namespaces:\nclient.session.list()      // CRUD, messages, prompt\nclient.provider.list()     // AI providers\nclient.project.current()   // Current project\nclient.config.get()        // Config\nclient.global.event()      // SSE subscription\n// ... 15+ namespaces total\n```\n\n### Challenges\n1. OpenCode server runs on random port\n2. Server needs to run from a project directory (has Instance context)\n3. POC script tries to spawn server and capture port from output\n\n### Next Steps\n- Fix POC to properly spawn server and parse port\n- Or: accept port as env var for dev (simpler)\n- Wire up React hooks in src/react/\n- SSE subscription for real-time updates","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T03:43:48.036Z","updated_at":"2025-12-27T03:58:53.478Z","closed_at":"2025-12-27T03:58:53.478Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrh2fhuxd","title":"Wire up OpenCode SDK connection","description":"Fix provider display bug, create React hooks (useSession, useMessages, useProvider, useSSE), and set up SSE subscription for real-time updates","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T03:49:02.477Z","updated_at":"2025-12-27T03:58:52.063Z","closed_at":"2025-12-27T03:58:52.063Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrh2fqml6","title":"Fix provider display in POC","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T03:49:02.486Z","updated_at":"2025-12-27T03:53:52.933Z","closed_at":"2025-12-27T03:53:52.933Z","parent_id":"opencode-next--xts0a-mjnrh2fhuxd","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrh2fsop7","title":"Create useSSE hook for real-time updates","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T03:49:02.488Z","updated_at":"2025-12-27T03:53:54.439Z","closed_at":"2025-12-27T03:53:54.439Z","parent_id":"opencode-next--xts0a-mjnrh2fhuxd","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrh2fuict","title":"Create useProvider hook","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T03:49:02.490Z","updated_at":"2025-12-27T03:58:42.908Z","closed_at":"2025-12-27T03:58:42.908Z","parent_id":"opencode-next--xts0a-mjnrh2fhuxd","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrh2fxlxj","title":"Create useSession hook","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T03:49:02.493Z","updated_at":"2025-12-27T03:58:44.066Z","closed_at":"2025-12-27T03:58:44.066Z","parent_id":"opencode-next--xts0a-mjnrh2fhuxd","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrh2g0q4n","title":"Create useMessages hook","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T03:49:02.496Z","updated_at":"2025-12-27T03:58:45.419Z","closed_at":"2025-12-27T03:58:45.419Z","parent_id":"opencode-next--xts0a-mjnrh2fhuxd","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrw80g28x","title":"Minimal POC UI with entity pages","description":"Basic UI showing hooks work: root dashboard with providers/sessions, clickable through to /session/[id] and /provider/[id] pages. Raw data display, no fancy styling.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T04:00:49.552Z","updated_at":"2025-12-27T04:04:15.213Z","closed_at":"2025-12-27T04:04:15.213Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrw80mxqb","title":"Create root dashboard page","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T04:00:49.558Z","updated_at":"2025-12-27T04:04:11.433Z","closed_at":"2025-12-27T04:04:11.433Z","parent_id":"opencode-next--xts0a-mjnrw80g28x","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrw80pq4e","title":"Create session detail page","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T04:00:49.561Z","updated_at":"2025-12-27T04:04:12.278Z","closed_at":"2025-12-27T04:04:12.278Z","parent_id":"opencode-next--xts0a-mjnrw80g28x","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnrw80s972","title":"Create provider detail page","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T04:00:49.564Z","updated_at":"2025-12-27T04:04:13.640Z","closed_at":"2025-12-27T04:04:13.640Z","parent_id":"opencode-next--xts0a-mjnrw80g28x","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnt1qj2ib2","title":"Type-safe session rendering with ai-elements","description":"Create a type-safe transform layer from OpenCode SDK types to ai-elements types. Let TypeScript guide the mapping - import source types from @opencode-ai/sdk, import target types from ai-elements, write transforms that satisfy the compiler.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T04:33:06.446Z","updated_at":"2025-12-27T04:41:27.949Z","closed_at":"2025-12-27T04:41:27.949Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnt1qj9x34","title":"Create transform layer with SDK + ai-elements types","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T04:33:06.453Z","updated_at":"2025-12-27T04:36:32.621Z","closed_at":"2025-12-27T04:36:32.621Z","parent_id":"opencode-next--xts0a-mjnt1qj2ib2","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnt1qjcvpr","title":"Integrate transform into useMessages hook","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T04:33:06.456Z","updated_at":"2025-12-27T04:41:24.542Z","closed_at":"2025-12-27T04:41:24.542Z","parent_id":"opencode-next--xts0a-mjnt1qj2ib2","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnt1qjfy5i","title":"Update session page to use ai-elements components","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T04:33:06.459Z","updated_at":"2025-12-27T04:41:25.812Z","closed_at":"2025-12-27T04:41:25.812Z","parent_id":"opencode-next--xts0a-mjnt1qj2ib2","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnupcu2ntg","title":"Full ai-elements component integration","description":"Replace basic session page rendering with proper ai-elements components. Use Message, Tool, Reasoning, CodeBlock, Conversation components for rich UI. Type-safe integration with existing transform layer.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T05:19:28.058Z","updated_at":"2025-12-27T05:25:08.095Z","closed_at":"2025-12-27T05:25:08.095Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnupcu84jd","title":"Research ai-elements component props and usage patterns","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T05:19:28.064Z","updated_at":"2025-12-27T05:21:44.204Z","closed_at":"2025-12-27T05:21:44.204Z","parent_id":"opencode-next--xts0a-mjnupcu2ntg","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnupcua1po","title":"Update session page to use ai-elements components","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T05:19:28.066Z","updated_at":"2025-12-27T05:25:06.657Z","closed_at":"2025-12-27T05:25:06.657Z","parent_id":"opencode-next--xts0a-mjnupcu2ntg","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjnwjk9n5vx","title":"Debug: Message sending and SSE streaming not working","description":"## Context\n- Session page loads at http://localhost:8423/session/ses_4a242fb53ffekQiAoVBmQyEu2i?dir=%2FUsers%2Fjoel%2FCode%2Fjoelhooks%2Fopencode-next\n- OpenCode API server running on port 4056 (was hardcoded to 4096, fixed)\n- Next.js dev server on port 8423\n\n## Problem\n1. Sending a message via the input is \"swallowed\" - no visible response\n2. SSE streaming not working - new messages don't appear\n\n## Implementation State\n- `apps/web/src/app/session/[id]/session-messages.tsx` - Client component with:\n  - `handleSubmit` calls `client.session.prompt()` \n  - SSE subscriptions for `message.created`, `message.updated`, `message.part.updated`, `session.updated`\n  - Console logs added for debugging\n- `apps/web/src/react/use-sse.ts` - SSE hook using `globalClient.global.event()`\n- `apps/web/src/core/client.ts` - Client factory, now pointing to localhost:4056\n\n## Curl that should work\n```bash\ncurl -X POST \"http://localhost:4056/session/ses_xxx/message\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"x-opencode-directory: /Users/joel/Code/joelhooks/opencode-next\" \\\n  -d '{\"parts\": [{\"type\": \"text\", \"text\": \"hello\"}]}'\n```\n\n## Debug approach\nUse Chrome DevTools MCP to:\n1. Check console for errors/logs from handleSubmit\n2. Check Network tab for the POST request to /session/{id}/prompt\n3. Check if SSE connection is established\n4. Verify request/response payloads","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-27T06:10:56.987Z","updated_at":"2025-12-27T06:28:56.808Z","closed_at":"2025-12-27T06:28:56.808Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjoizozoxho","title":"Fix scroll behavior: page scroll instead of inner container","description":"Superseded by epic mjojc2dpcfn - Fix session page rendering issues","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T16:39:21.156Z","updated_at":"2025-12-27T16:49:32.906Z","closed_at":"2025-12-27T16:49:32.900Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjojc2dzs97","title":"Fix autoscroll - restore proper container hierarchy for use-stick-to-bottom","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T16:48:58.391Z","updated_at":"2025-12-27T16:54:10.699Z","closed_at":"2025-12-27T16:54:10.699Z","parent_id":"opencode-next--xts0a-mjojc2dpcfn","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjojei9n3sg","title":"Handle file content with line numbers - don't render as markdown","description":"Read tool output includes line numbers (00001| content) which breaks markdown parsing.\n\nThe `<file>` wrapped content should be rendered as a code block, not parsed as markdown.\n\nExample bad input:\n```\n<file>\n00001| # ADR 001: Title\n00002| \n00003| | Column | Column |\n</file>\n```\n\nThe line numbers break heading and table detection.\n\nFix options:\n1. In transform layer: detect `<file>` wrapper and convert to code block\n2. In MessageResponse: handle `<file>` tag specially (render as pre/code)\n3. Strip line numbers before markdown parsing\n\nFiles: \n- apps/web/src/lib/transform-messages.ts\n- apps/web/src/components/ai-elements/message.tsx","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T16:50:52.283Z","updated_at":"2025-12-27T16:52:59.742Z","closed_at":"2025-12-27T16:52:59.742Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjoj6stbspo","title":"Add context usage monitoring to session page","description":"Display context window usage (tokens, percentage, cost) in session header.\n\nRequirements:\n- Read token counts from assistant messages (input, output, reasoning, cache.read, cache.write)\n- Look up model context limit from provider (Claude Opus 4 = 200k context)\n- Calculate percentage: (totalTokens / model.limit.context) * 100\n- Show cumulative cost across all assistant messages\n- Display as progress indicator with tooltip showing details\n\nData sources:\n- AssistantMessage.tokens: { input, output, reasoning, cache: { read, write } }\n- AssistantMessage.cost: number (USD)\n- Provider.models[modelID].limit.context: number\n\nReference: packages/app/src/components/session-context-usage.tsx (SolidJS implementation)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T16:44:52.703Z","updated_at":"2025-12-27T17:41:41.764Z","closed_at":"2025-12-27T17:41:41.764Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjojc2dpcfn","title":"Fix session page rendering issues","description":"Multiple rendering issues on the session detail page need to be fixed:\n\n1. **Autoscroll broken** - Conversation component uses `use-stick-to-bottom` which requires proper container hierarchy\n2. **Code blocks/syntax highlighting bad** - Streamdown styles not loading properly\n3. **Tables rendering oddly** - GFM tables not styled correctly\n4. **Background inconsistency** - Fixed: changed `bg-zinc-50 dark:bg-black` to `bg-background`\n5. **Container hierarchy issues** - Need proper flex layout for scroll behavior\n\nRoot causes:\n- Tailwind v4 `@source` directive needed for streamdown classes\n- Container hierarchy breaking `use-stick-to-bottom` scroll behavior\n- Missing table/code block styles from streamdown","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T16:48:58.381Z","updated_at":"2025-12-27T17:52:36.649Z","closed_at":"2025-12-27T17:52:36.649Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjojc2e2n9q","title":"Add streamdown @source directive for Tailwind v4","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T16:48:58.394Z","updated_at":"2025-12-27T17:29:57.470Z","closed_at":"2025-12-27T17:29:57.470Z","parent_id":"opencode-next--xts0a-mjojc2dpcfn","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjojc2e8ar7","title":"Style markdown tables with Catppuccin theme","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:48:58.400Z","updated_at":"2025-12-27T17:52:33.787Z","closed_at":"2025-12-27T17:52:33.787Z","parent_id":"opencode-next--xts0a-mjojc2dpcfn","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjojc2eb3qn","title":"Style code blocks with Catppuccin theme","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:48:58.403Z","updated_at":"2025-12-27T17:52:34.874Z","closed_at":"2025-12-27T17:52:34.874Z","parent_id":"opencode-next--xts0a-mjojc2dpcfn","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjokdky4z0q","title":"Implement session creation for OpenCode React client","description":"Add ability to create new sessions from the web UI.\n\nRequirements:\n- POST /session with x-opencode-directory header\n- Hook for session creation (useCreateSession or mutation)\n- New Session button in header\n- Navigate to new session after creation\n- SSE already handles session.updated events\n\nAPI: POST /session with optional { title?: string } body\nResponse: Session object with id, projectID, directory, title, time","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T17:18:08.716Z","updated_at":"2025-12-27T17:29:56.642Z","closed_at":"2025-12-27T17:29:56.642Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjokf2gstrs","title":"Implement session creation for OpenCode React client","description":"Add ability to create new sessions from the web UI with useCreateSession hook and New Session button","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T17:19:18.076Z","updated_at":"2025-12-27T17:27:37.075Z","closed_at":"2025-12-27T17:27:37.075Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjokf2h03si","title":"Create useCreateSession hook","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T17:19:18.084Z","updated_at":"2025-12-27T17:23:41.858Z","closed_at":"2025-12-27T17:23:41.858Z","parent_id":"opencode-next--xts0a-mjokf2gstrs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjokf2h46e4","title":"Add New Session button to session page header","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T17:19:18.088Z","updated_at":"2025-12-27T17:27:36.109Z","closed_at":"2025-12-27T17:27:36.109Z","parent_id":"opencode-next--xts0a-mjokf2gstrs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjokkcl9tls","title":"Fix Streamdown TypeScript syntax leaking as HTML tags","description":"Multiple console errors from TypeScript syntax being parsed as HTML tags by Streamdown/markdown parser:\n\nIssues:\n1. `<r>`, `<any>`, `<string,>`, `<t>`, `<void>`, `<unknown>`, `<anonymous>` - TS generics as tags\n2. Invalid attributes: `promise<context`, `set<(event:`, `event)` - TS syntax as attributes\n3. `defaultvalue` vs `defaultValue` - React DOM property casing\n4. Missing key props in nested .map()\n\nRoot cause: Markdown parser is treating TypeScript generic syntax like `Map<string, any>` or `Promise<T>` as HTML tags.\n\nSolution options:\n1. Pre-process markdown to escape angle brackets in code contexts\n2. Custom rehype plugin to sanitize invalid tags\n3. Expand the Proxy fallback to handle more edge cases","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-27T17:23:24.477Z","updated_at":"2025-12-27T17:41:40.110Z","closed_at":"2025-12-27T17:41:40.110Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjokueyzve1","title":"Fix blocking route error on dashboard - wrap in Suspense","description":"Next.js 16 error: Uncached data accessed outside Suspense.\n\nError: Route \"/\": Uncached data or `connection()` was accessed outside of `<Suspense>`.\n\nFix: Wrap the async data fetching in Suspense boundary or use cache() directive.\n\nFile: apps/web/src/app/page.tsx","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-27T17:31:14.123Z","updated_at":"2025-12-27T17:41:43.508Z","closed_at":"2025-12-27T17:41:43.508Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjomfi6cxqi","title":"Binary search utility with unit tests","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T18:15:37.668Z","updated_at":"2025-12-27T18:25:10.147Z","closed_at":"2025-12-27T18:25:10.147Z","parent_id":"opencode-next--xts0a-mjomfi67kp4","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjomfi6effm","title":"Zustand store with Immer and unit tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:15:37.670Z","updated_at":"2025-12-27T18:42:15.445Z","closed_at":"2025-12-27T18:42:15.445Z","parent_id":"opencode-next--xts0a-mjomfi67kp4","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjomfi6g4fl","title":"SSE hook with reconnection and integration tests","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T18:15:37.672Z","updated_at":"2025-12-27T18:35:02.510Z","closed_at":"2025-12-27T18:35:02.510Z","parent_id":"opencode-next--xts0a-mjomfi67kp4","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjomfi6kmpo","title":"Add zustand and immer dependencies","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T18:15:37.676Z","updated_at":"2025-12-27T18:35:58.380Z","closed_at":"2025-12-27T18:35:58.380Z","parent_id":"opencode-next--xts0a-mjomfi67kp4","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjomfi67kp4","title":"Implement SSE Sync Layer from SYNC_IMPLEMENTATION.md","description":"Implement real-time SSE sync layer for Next.js app following docs/guides/SYNC_IMPLEMENTATION.md. Hybrid approach: audit existing hooks, implement missing pieces. Full testing trophy: unit tests for pure functions, integration tests for hook interactions.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T18:15:37.663Z","updated_at":"2025-12-27T19:05:29.310Z","closed_at":"2025-12-27T19:05:29.310Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjomfi6hwq5","title":"OpenCodeProvider with integration tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:15:37.673Z","updated_at":"2025-12-27T19:05:23.816Z","closed_at":"2025-12-27T19:05:23.816Z","parent_id":"opencode-next--xts0a-mjomfi67kp4","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjomfi6jk7q","title":"Session and Message hooks with unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T18:15:37.675Z","updated_at":"2025-12-27T19:05:07.876Z","closed_at":"2025-12-27T19:05:07.876Z","parent_id":"opencode-next--xts0a-mjomfi67kp4","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjoodsechhz","title":"Session Page Chat UI with Real-time Streaming","description":"Wire up session page to use OpenCodeProvider/useSession/useMessages hooks, implement chat UI with ai-elements components, add message streaming support. Progressive: hooks → UI → streaming.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T19:10:16.836Z","updated_at":"2025-12-27T19:27:26.734Z","closed_at":"2025-12-27T19:27:26.734Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjoodseh8lb","title":"Wire session page to use hooks and OpenCodeProvider","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T19:10:16.841Z","updated_at":"2025-12-27T19:17:51.342Z","closed_at":"2025-12-27T19:17:51.342Z","parent_id":"opencode-next--xts0a-mjoodsechhz","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjoodsejg5w","title":"Implement chat UI with ai-elements components","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:10:16.843Z","updated_at":"2025-12-27T19:21:42.417Z","closed_at":"2025-12-27T19:21:42.417Z","parent_id":"opencode-next--xts0a-mjoodsechhz","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjoodsel10s","title":"Add message streaming and part updates","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:10:16.845Z","updated_at":"2025-12-27T19:27:05.419Z","closed_at":"2025-12-27T19:27:05.419Z","parent_id":"opencode-next--xts0a-mjoodsechhz","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjopc10o42o","title":"Phase 3: Full Feature Parity","description":"Complete the OpenCode Next.js rebuild with interactive chat, model selection, status indicators, theming, and provider management. Transform from read-only viewer to fully functional chat application.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-27T19:36:54.312Z","updated_at":"2025-12-27T19:36:54.312Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjopc10yalm","title":"Add model selector to prompt input","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T19:36:54.322Z","updated_at":"2025-12-27T19:36:54.322Z","parent_id":"opencode-next--xts0a-mjopc10o42o","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjopc112ymf","title":"Add provider management page","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T19:36:54.326Z","updated_at":"2025-12-27T19:36:54.326Z","parent_id":"opencode-next--xts0a-mjopc10o42o","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjopc10ttlc","title":"Wire prompt input to session page for sending messages","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T19:36:54.317Z","updated_at":"2025-12-27T19:47:24.611Z","closed_at":"2025-12-27T19:47:24.611Z","parent_id":"opencode-next--xts0a-mjopc10o42o","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjopc10vanm","title":"Add session status indicator (running/idle)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T19:36:54.319Z","updated_at":"2025-12-27T19:47:25.600Z","closed_at":"2025-12-27T19:47:25.600Z","parent_id":"opencode-next--xts0a-mjopc10o42o","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjopc110pij","title":"Implement theme switching (light/dark)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:36:54.324Z","updated_at":"2025-12-27T19:47:26.658Z","closed_at":"2025-12-27T19:47:26.658Z","parent_id":"opencode-next--xts0a-mjopc10o42o","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0idup","title":"Types & Prompt Store","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T21:30:22.194Z","updated_at":"2025-12-27T21:36:10.463Z","closed_at":"2025-12-27T21:36:10.463Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0dxw5","title":"Slash Commands & @ References","description":"Full implementation of slash commands and @ file references for prompt input - contenteditable editor with file pills, autocomplete, keyboard navigation, and API integration","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-27T21:30:22.189Z","updated_at":"2025-12-27T22:02:40.357Z","closed_at":"2025-12-27T22:02:40.357Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0jji4","title":"Input Parsing Utilities","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:30:22.195Z","updated_at":"2025-12-27T21:45:58.310Z","closed_at":"2025-12-27T21:45:58.310Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0l53e","title":"File Search Hook","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:30:22.197Z","updated_at":"2025-12-27T21:45:59.833Z","closed_at":"2025-12-27T21:45:59.833Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0nlpp","title":"Command Registry Hook","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:30:22.199Z","updated_at":"2025-12-27T21:46:01.459Z","closed_at":"2025-12-27T21:46:01.459Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0plby","title":"Autocomplete Component","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:30:22.201Z","updated_at":"2025-12-27T21:46:03.041Z","closed_at":"2025-12-27T21:46:03.041Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0r4el","title":"File Pill Component","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:30:22.203Z","updated_at":"2025-12-27T21:46:04.457Z","closed_at":"2025-12-27T21:46:04.457Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0smvo","title":"Prompt Input Component","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T21:30:22.204Z","updated_at":"2025-12-27T21:55:52.506Z","closed_at":"2025-12-27T21:55:52.506Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjotdy0ubfe","title":"API Integration & Session Page","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T21:30:22.206Z","updated_at":"2025-12-27T22:02:38.599Z","closed_at":"2025-12-27T22:02:38.599Z","parent_id":"opencode-next--xts0a-mjotdy0dxw5","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rwi2hs","title":"Complete SSE Sync Implementation per SYNC_IMPLEMENTATION.md","description":"Implement all missing SSE sync features identified in gap analysis. Reference: docs/guides/SYNC_IMPLEMENTATION.md\n\nGroups:\n- A: Store expansion (parallel) - sessionStatus, sessionDiff, parts, todos\n- C: Connection lifecycle (sequential) - bootstrap, reconnect, heartbeat, sync()\n- B: Event subscriptions (parallel) - wire up all missing event types","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-28T02:00:50.562Z","updated_at":"2025-12-28T02:00:50.562Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rwrdxq","title":"C1: Implement bootstrap in provider","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T02:00:50.571Z","updated_at":"2025-12-28T02:00:50.571Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rwu4ch","title":"C2: Re-bootstrap on SSE reconnect","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T02:00:50.574Z","updated_at":"2025-12-28T02:00:50.574Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rww6av","title":"C3: Heartbeat timeout detection (60s)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T02:00:50.576Z","updated_at":"2025-12-28T02:00:50.576Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rwxkf2","title":"C4: Implement sync() for manual refresh","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T02:00:50.577Z","updated_at":"2025-12-28T02:00:50.577Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rwza3x","title":"B1: Wire message.part.updated + message.part.removed events","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T02:00:50.579Z","updated_at":"2025-12-28T02:00:50.579Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rx0p4d","title":"B2: Wire todo.updated event","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T02:00:50.580Z","updated_at":"2025-12-28T02:00:50.580Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rx2k8w","title":"B3: Wire session.status + session.diff events","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T02:00:50.582Z","updated_at":"2025-12-28T02:00:50.582Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rx4s8w","title":"B4: Wire global.disposed + archived session handling","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T02:00:50.584Z","updated_at":"2025-12-28T02:00:50.584Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rwonzt","title":"A1: Expand store.ts with DirectoryState pattern","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T02:00:50.568Z","updated_at":"2025-12-28T02:07:45.120Z","closed_at":"2025-12-28T02:07:45.120Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp31rwqjd5","title":"A2: Add Part/Todo/Status/Diff types","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T02:00:50.570Z","updated_at":"2025-12-28T02:07:52.787Z","closed_at":"2025-12-28T02:07:52.787Z","parent_id":"opencode-next--xts0a-mjp31rwi2hs","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbc8ia","title":"P0: Complete SSE Sync + Mobile Fixes (Audit-Driven)","description":"Fix critical gaps identified in docs/audits/01-SYNC-AUDIT.md and docs/audits/03-MOBILE-UX-AUDIT.md.\n\nCurrent state: Architecture correct, implementation incomplete. Store refactored to DirectoryState but missing convenience methods. Bootstrap implemented but missing event handlers.\n\nKey gaps:\n- session.created/deleted events silently dropped (subscribed but not handled)\n- global.disposed handled but needs re-bootstrap on reconnect\n- No visibility API (battery drain on mobile)\n- No safe-area CSS (content hidden under notch)\n- No heartbeat timeout detection\n\nSDK types available via @opencode-ai/sdk/client - use them instead of redefining.\n\nReference: /Users/joel/Code/sst/opencode/packages/app/src/ (SolidJS source of truth)","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-28T02:21:00.264Z","updated_at":"2025-12-28T02:21:00.264Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbh74u","title":"Add session.created + session.deleted handlers to store","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-28T02:21:00.269Z","updated_at":"2025-12-28T02:21:00.269Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbjahb","title":"Add convenience methods to store (getSession, addSession, updateSession, removeSession, getMessages, etc)","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-28T02:21:00.271Z","updated_at":"2025-12-28T02:21:00.271Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpblizu","title":"Handle global.disposed with re-bootstrap on SSE reconnect","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-28T02:21:00.273Z","updated_at":"2025-12-28T02:21:00.273Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbnnx0","title":"Add visibility API to SSE - disconnect when backgrounded, reconnect when foregrounded","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-28T02:21:00.275Z","updated_at":"2025-12-28T02:21:00.275Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbqwqb","title":"Add safe-area CSS for iPhone notch/home indicator","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-28T02:21:00.278Z","updated_at":"2025-12-28T02:21:00.278Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbshd2","title":"Add heartbeat timeout detection (60s = 2x server heartbeat)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T02:21:00.280Z","updated_at":"2025-12-28T02:21:00.280Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbteun","title":"Import SDK types instead of redefining (Session, Message, Part, etc)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T02:21:00.281Z","updated_at":"2025-12-28T02:21:00.281Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3rpbv1kt","title":"Add session.error handler with toast notification","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T02:21:00.283Z","updated_at":"2025-12-28T02:21:00.283Z","parent_id":"opencode-next--xts0a-mjp3rpbc8ia","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3vrgvywk","title":"Fix Store Refactor: Restore Convenience Methods","description":"Fix 49 type errors and 28 test failures by restoring convenience methods to store with DirectoryState pattern, then update callers to pass directory param.\n\nExecution order:\n1. FIRST: Add all methods to store (blocks everything else)\n2. THEN PARALLEL: Update use-session.ts, use-messages.ts, session-layout.tsx","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-28T02:24:09.679Z","updated_at":"2025-12-28T02:24:09.679Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3vrh0uy6","title":"Add ALL convenience methods to store (session + message)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T02:24:09.684Z","updated_at":"2025-12-28T02:39:41.106Z","closed_at":"2025-12-28T02:39:41.106Z","parent_id":"opencode-next--xts0a-mjp3vrgvywk","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3vrh2s7k","title":"Update use-session.ts to pass directory param","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T02:24:09.686Z","updated_at":"2025-12-28T02:39:47.830Z","closed_at":"2025-12-28T02:39:47.830Z","parent_id":"opencode-next--xts0a-mjp3vrgvywk","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3vrh4kuy","title":"Update use-messages.ts to pass directory param","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T02:24:09.688Z","updated_at":"2025-12-28T02:39:49.019Z","closed_at":"2025-12-28T02:39:49.019Z","parent_id":"opencode-next--xts0a-mjp3vrgvywk","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp3vrh64t8","title":"Update session-layout.tsx to pass directory param","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T02:24:09.690Z","updated_at":"2025-12-28T02:39:50.439Z","closed_at":"2025-12-28T02:39:50.439Z","parent_id":"opencode-next--xts0a-mjp3vrgvywk","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-next--xts0a-mjp4g5zvroy","title":"Fix remaining test failures (3 issues)","description":"Remaining issues after store refactor fix:\n\n1. use-session.test.ts:157 - \"updates when session.updated event fires\" test fails\n   - Expected \"Updated Title\", got \"Test Session\"\n   - Event handling not triggering update\n\n2. provider.test.tsx - Import error\n   - SyntaxError: Export named 'useSSEDirect' not found\n   - Module resolution issue with SDK types\n\n3. use-session-status.test.ts:44 - Type error\n   - TS2556: A spread argument must either have a tuple type or be passed to a rest parameter\n\nFiles: use-session.test.ts, provider.test.tsx, use-session-status.test.ts","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-28T02:40:01.627Z","updated_at":"2025-12-28T03:01:01.869Z","closed_at":"2025-12-28T03:01:01.869Z","parent_id":"opencode-next--xts0a-mjp3vrgvywk","dependencies":[],"labels":[],"comments":[]}
